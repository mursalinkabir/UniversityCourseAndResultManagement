@using UniversityCourseAndResultManagement.Models
@model UniversityCourseAndResultManagement.Models.Course



@{
    ViewBag.Title = "View Course Statics";
    var courses = ViewBag.Courses;
    var depts = ViewBag.Departments;
}



    <div>
        <fieldset>
            <legend> View Course Statics</legend>

            <form method="Post" id="form">

                <table >
                    <tr>

                        <td>@Html.LabelFor(m => m.DepartmentId)</td>

                        <td>
                            @Html.DropDownListFor(model => model.DepartmentId, new SelectList(depts, "Id", "Name"), "-- Select Department--")
                            @Html.ValidationMessageFor(m => m.DepartmentId)
                        </td>


                        @*<td> <input type="submit" id="Search" value="Search" /></td>*@



                    </tr>


                </table>

            </form>

            <br />
            <br />


            <table border="1">



                @if (ViewBag.PostBack)
                {

                    <tr>Course Information</tr>
                    <tr><th bgcolor="#e0e0d1">Code</th><th bgcolor="#e0e0d1">Name/Title</th><th bgcolor="#e0e0d1">Semester</th><th bgcolor="#e0e0d1">Assigned To</th></tr>
                    foreach (var items in courses)
                    {
                        <tr>
                            <td>@items.Code</td>
                            <td>@items.Name</td>
                            <td>@items.SemesterName</td>
                            <td>@items.TeacherName</td>
                        </tr>
                    }

                }






            </table>

        </fieldset>

    </div>
@*<script src="~/Scripts/jquery-2.2.0.js"></script>
    <script src="~/Scripts/jquery.validate.js"></script>
    <script src="~/Scripts/jquery.validate.unobtrusive.js"></script>*@
@section Scripts{
    <script>
        $(document).ready(function () {
            $("#DepartmentId").change(function () {
                //alert("Hello");
                //var regNo = $("#DepartmentId").val();
                //$("#studentId").empty();
                @*var json = { RegNo: regNo };
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetDepartmentNameByRegNo", "ViewResult")',
                    contentType: "application/json; charset=utf-8",
                    data: JSON.stringify(json),
                    success: function (data) {
                        //debugger;
                        var testdata = data;
                        //alert(data);

                        //alert(key);

                        $("#DepartmentName").val(data.DepartmentName);


                    }
                });*@
                $("#form").submit();
            });
        });
    </script>
}
